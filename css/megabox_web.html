<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MEGABOX-WEB (Final)</title>
    <style>
      /* =========================================
         [CSS] 디자인 (건드리지 않음)
         ========================================= */
      :root {
        --main-color: #503396;
        --main-dark: #351f66;
        --text-color: #222;
        --gray-text: #666;
        --border-color: #ccc;
        --bg-light: #f8f8fa;
        --point-blue: #339ed2;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Malgun Gothic", sans-serif;
        color: var(--text-color);
      }
      a {
        text-decoration: none;
        color: inherit;
      }
      ul,
      li {
        list-style: none;
      }
      button {
        cursor: pointer;
        font-family: inherit;
        border: none;
        background: transparent;
      }

      /* 레이아웃 */
      .top-inner,
      .inner,
      .footer-wrap,
      .nav-wrap {
        width: 1100px;
        margin: 0 auto;
      }

      /* 헤더 */
      header {
        background-color: #fff;
        border-bottom: 1px solid #4f3395;
      }
      .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 60px;
      }
      .header-top-left a,
      .header-top-right a {
        color: var(--gray-text);
        font-size: 13px;
        margin: 0 10px;
      }
      .header-top-left a:hover,
      .header-top-right a:hover {
        text-decoration: underline;
      }
      .logo {
        margin-top: 5px;
        cursor: pointer;
      }
      .logo img {
        width: 140px;
      }

      .header-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 50px;
      }
      .gnb-left,
      .gnb-right {
        display: flex;
        gap: 20px;
        align-items: center;
      }
      .icon-btn img {
        width: 24px;
        height: 24px;
        display: block;
      }

      .gnb-center {
        position: relative;
        width: 100%;
      }
      .gnb-center-nav {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 80px;
      }
      .gnb-center-nav-item {
        position: static;
        display: flex;
        height: 50px;
        align-items: center;
      }
      .gnb-center-nav-item > a {
        font-size: 18px;
        font-weight: bold;
        padding: 10px 0;
        border-bottom: 3px solid transparent;
      }
      .gnb-center-nav-item:hover > a {
        border-bottom: 3px solid var(--point-blue);
      }

      .dropdown {
        position: absolute;
        top: 50px;
        left: 0;
        width: 100%;
        background-color: var(--point-blue);
        display: none;
        z-index: 1000;
        padding: 0;
        margin: 0;
        justify-content: center;
      }
      .gnb-center-nav-item:hover .dropdown {
        display: flex;
      }
      .dropdown li {
        padding: 0 20px;
      }
      .dropdown a {
        display: block;
        padding: 15px 0;
        color: white;
        font-size: 14px;
        font-weight: bold;
      }
      .dropdown a:hover {
        text-decoration: underline;
      }

      /* 경로 바 */
      .movie-order {
        background-color: #f7f7f7;
        padding: 10px 0;
        border-bottom: 1px solid #e1e1e1;
      }
      .movie-navi-order {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 13px;
        color: var(--gray-text);
      }
      .movie-navi-order img {
        vertical-align: middle;
      }
      .movie-navi-order a:hover {
        text-decoration: underline;
      }

      /* 메인 */
      main {
        padding: 40px 0;
      }
      .page-title {
        font-size: 26px;
        margin-bottom: 20px;
        color: var(--text-color);
      }

      /* 탭 */
      .movie-tab {
        display: flex;
        border: 1px solid var(--border-color);
        border-bottom: 1px solid var(--main-color);
        margin-bottom: 40px;
        padding: 0;
        position: sticky;
        z-index: 90;
        top: 0;
        background-color: #fff;
      }
      .movie-tab li {
        flex: 1;
        text-align: center;
        padding: 15px 0;
        border-right: 1px solid #eee;
        cursor: pointer;
        font-size: 15px;
        color: var(--text-color);
      }
      .movie-tab li:last-child {
        border-right: none;
      }
      .movie-tab li.active {
        background-color: var(--main-color);
        color: white;
        border-color: var(--main-color);
      }

      /* 검색바 */
      .movie-searchbar {
        margin-bottom: 20px;
        display: flex;
        gap: 15px;
        align-items: center;
        font-size: 14px;
      }
      .toggle-btn {
        width: 30px;
        height: 20px;
        background: url("https://img.megabox.co.kr/static/pc/images/common/btn/btn-on-air-on.png")
          no-repeat center/contain;
        cursor: pointer;
      }
      /* 토글 OFF 상태를 위한 클래스 추가 (이미지는 없어서 grayscale 처리로 구분) */
      .toggle-btn.off {
        filter: grayscale(100%);
        opacity: 0.5;
      }

      .search-count b {
        color: var(--main-color);
      }
      .search-input-wrap {
        margin-left: auto;
        position: relative;
      }
      #movie-searchbar {
        padding: 8px 35px 8px 10px;
        border: 1px solid #d8d9db;
        outline: none;
        width: 230px;
        font-size: 14px;
      }
      .search-icon {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        background: url("https://img.megabox.co.kr/static/pc/images/common/ico/ico-search.png")
          no-repeat center/contain;
        border: none;
        cursor: pointer;
      }

      /* 영화 리스트 */
      .movie-list {
        display: flex;
        gap: 40px;
        flex-flow: row wrap;
        min-height: 500px;
      }
      .movie-card {
        width: 245px;
      }

      .poster-area {
        position: relative;
        width: 100%;
        height: 350px;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 10px;
        background-color: #333;
      }
      .poster-area img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .poster-area .rank {
        position: absolute;
        top: 0;
        left: 0;
        background-color: var(--main-color);
        color: white;
        width: 30px;
        height: 30px;
        text-align: center;
        line-height: 30px;
        font-weight: bold;
        font-size: 18px;
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 20px;
        opacity: 0;
        transition: opacity 0.3s ease;
        padding: 20px;
        text-align: center;
      }
      .poster-area:hover .overlay {
        opacity: 1;
      }
      .explanation {
        font-size: 14px;
        line-height: 1.4;
        color: #ddd;
      }
      .Reviews {
        font-size: 16px;
        color: #fff;
      }
      .Reviews b {
        color: #59bfc5;
      }

      .info-area {
        margin-bottom: 10px;
      }
      .movie-name {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      .age-icon {
        width: 20px;
        height: 20px;
        vertical-align: middle;
      }
      .movie-rate {
        font-size: 14px;
        color: var(--gray-text);
      }

      .btn-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .btn-top {
        display: flex;
        gap: 5px;
      }
      .btn-common {
        border-radius: 4px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .btn-heart {
        width: 30%;
        padding: 8px 0;
        border: 1px solid #ebebeb;
        background-color: #fff;
        color: #444;
        font-size: 13px;
      }
      .btn-heart:hover {
        background-color: #f8f8f8;
      }
      .btn-book {
        width: 70%;
        flex: 1;
        padding: 8px 0;
        background-color: var(--main-color);
        border: 1px solid var(--main-color);
        color: white;
        font-size: 15px;
      }
      .btn-book:hover {
        background-color: var(--main-dark);
      }

      /* 돌비 버튼 스타일 클래스는 유지하되, 화면에는 출력되지 않음 */
      .btn-dolby {
        width: 100%;
        padding: 8px 0;
        background-color: transparent;
        border: 1px solid #ebebeb;
      }
      .btn-dolby img {
        height: 16px;
      }

      .more-btn {
        width: 100%;
        height: 40px;
        background-color: #fff;
        margin-top: 40px;
        border: 1px solid #eaeaea;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #666;
        font-size: 14px;
        transition: border 0.3s;
      }
      .more-btn:hover {
        border: 1px solid #666;
        color: #222;
      }
      .more-btn img {
        margin-left: 5px;
      }

      /* 푸터 */
      footer {
        background-color: var(--bg-light);
        margin-top: 60px;
        padding-bottom: 40px;
      }
      .footer-wrap {
        display: flex;
        flex-direction: column;
      }
      .footer-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 1px solid #ebebeb;
      }
      .footer-links {
        display: flex;
        gap: 20px;
        font-size: 13px;
      }
      .footer-links a {
        color: #666;
      }
      .footer-links strong {
        color: #222;
        font-weight: bold;
      }
      .cinema-search-btn {
        padding: 5px 15px;
        background-color: transparent;
        border: 1px solid #ccc;
        border-radius: 20px;
        font-size: 12px;
        color: #666;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      .cinema-search-btn img {
        width: 12px;
      }
      .footer-bottom {
        display: flex;
        align-items: flex-start;
        margin-top: 20px;
      }
      .footer-logo {
        margin-right: 20px;
      }
      .footer-logo img {
        width: 100px;
        opacity: 0.5;
      }
      .address-info {
        font-size: 12px;
        line-height: 1.6;
        color: #666;
        flex: 1;
      }
      .sns-links {
        display: flex;
        gap: 10px;
      }
      .sns-links img {
        width: 30px;
        opacity: 0.8;
        transition: opacity 0.2s;
      }
      .sns-links img:hover {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="top-inner">
        <div class="header-top">
          <div class="header-top-left">
            <a href="#">VIP LOUNGE</a>
            <a href="#">멤버십</a>
            <a href="#">고객센터</a>
          </div>
          <h1 class="logo" onclick="window.location.reload()">
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ci/logo_new2.png"
              alt="MEGABOX"
            />
          </h1>
          <div class="header-top-right">
            <a href="#" onclick="alert('로그인 서비스 준비중입니다.')"
              >로그인</a
            >
            <a href="#" onclick="alert('회원가입 서비스 준비중입니다.')"
              >회원가입</a
            >
            <a href="#">빠른예매</a>
          </div>
        </div>
        <nav class="header-bottom">
          <div class="gnb-left">
            <button class="icon-btn" onclick="alert('전체메뉴 보기')">
              <img
                src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-sitemap.png"
                alt="전체메뉴"
              />
            </button>
            <button
              class="icon-btn"
              onclick="document.getElementById('movie-searchbar').focus()"
            >
              <img
                src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-search.png"
                alt="검색"
              />
            </button>
          </div>
          <div class="gnb-center">
            <ul class="gnb-center-nav">
              <li class="gnb-center-nav-item">
                <a href="#">영화</a>
                <ul class="dropdown">
                  <li><a href="#">전체영화</a></li>
                  <li><a href="#">무비포스트</a></li>
                </ul>
              </li>
              <li class="gnb-center-nav-item">
                <a href="#">예매</a>
                <ul class="dropdown">
                  <li><a href="#">빠른예매</a></li>
                  <li><a href="#">상영시간표</a></li>
                </ul>
              </li>
              <li class="gnb-center-nav-item">
                <a href="#">극장</a>
                <ul class="dropdown">
                  <li><a href="#">전체극장</a></li>
                  <li><a href="#">특별관</a></li>
                </ul>
              </li>
              <li class="gnb-center-nav-item"><a href="#">이벤트</a></li>
              <li class="gnb-center-nav-item"><a href="#">스토어</a></li>
              <li class="gnb-center-nav-item"><a href="#">혜택</a></li>
            </ul>
          </div>
          <div class="gnb-right">
            <button
              class="icon-btn"
              onclick="alert('상영시간표 페이지로 이동합니다.')"
            >
              <img
                src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-schedule.png"
                alt="상영시간표"
              />
            </button>
            <button
              class="icon-btn"
              onclick="alert('마이페이지로 이동합니다.')"
            >
              <img
                src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-mymega.png"
                alt="마이페이지"
              />
            </button>
          </div>
        </nav>
      </div>
    </header>

    <div class="movie-order">
      <div class="nav-wrap">
        <div class="movie-navi-order">
          <img
            class="home-icon"
            src="https://img.megabox.co.kr/static/pc/images/common/bg/bg-location-home.png"
            alt="홈"
          />
          <img
            src="https://img.megabox.co.kr/static/pc/images/common/bg/bg-location-arr.png"
            alt=">"
          />
          <a href="#">영화</a>
          <img
            src="https://img.megabox.co.kr/static/pc/images/common/bg/bg-location-arr.png"
            alt=">"
          />
          <a href="#">전체영화</a>
        </div>
      </div>
    </div>

    <main>
      <div class="inner">
        <h2 class="page-title">전체영화</h2>

        <ul class="movie-tab">
          <li class="active">박스오피스</li>
          <li>상영예정작</li>
          <li>MEGA ONLY</li>
          <li>필름소사이어티</li>
          <li>클래식소사이어티</li>
        </ul>

        <div class="movie-searchbar">
          <button class="toggle-btn" id="toggle-release"></button>
          <span class="movie-releases">개봉작만</span>
          <span class="search-count"><b>0</b>개의 영화가 검색되었습니다.</span>
          <div class="search-input-wrap">
            <input type="text" id="movie-searchbar" placeholder="영화명 검색" />
            <button class="search-icon" onclick="filterMovies()"></button>
          </div>
        </div>

        <div class="movie-list" id="movie-list"></div>

        <button class="more-btn" id="btn-more" onclick="loadMore()">
          더보기
          <img
            src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-btn-more-arr.png"
            alt=""
          />
        </button>
      </div>
    </main>

    <footer>
      <div class="footer-wrap">
        <div class="footer-top">
          <div class="footer-links">
            <a href="#">회사소개</a><a href="#">인재채용</a
            ><a href="#">사회공헌</a><a href="#">제휴/광고/부대사업문의</a
            ><a href="#">이용약관</a
            ><a href="#"><strong>개인정보 처리방침</strong></a
            ><a href="#">윤리경영</a>
          </div>
          <button
            class="cinema-search-btn"
            onclick="alert('극장 찾기 팝업을 엽니다.')"
          >
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-search.png"
            />
            극장찾기
          </button>
        </div>
        <div class="footer-bottom">
          <div class="footer-logo">
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ci/logo-opacity_new2.png"
            />
          </div>
          <div class="address-info">
            <p>
              서울특별시 강남구 테헤란로 87길 22 도심공항터미널 408호 | ARS
              1544-0070
            </p>
            <p>
              대표자명 홍정인, 남용석 | 개인정보보호책임자 김수현 |
              사업자등록번호 211-86-59478
            </p>
            <p>COPYRIGHT © MegaboxJoongAng, Inc. All rights reserved</p>
          </div>
          <div class="sns-links">
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-youtubeN.png"
              onclick="window.open('https://youtube.com')"
              style="cursor: pointer"
            />
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-instagramN.png"
              onclick="window.open('https://instagram.com')"
              style="cursor: pointer"
            />
            <img
              src="https://img.megabox.co.kr/static/pc/images/common/ico/ico-facebookN.png"
              onclick="window.open('https://facebook.com')"
              style="cursor: pointer"
            />
          </div>
        </div>
      </div>
    </footer>

    <script>
      // 1. 영화 데이터 (DB 대용)
      const movieData = [
        {
          rank: 1,
          title: "아바타: 불과 재",
          rate: 10.5,
          date: "2025.12.17",
          imgUrl:
            "https://image.tmdb.org/t/p/w500/pFlaoHTZeyNkG83vxsAJiGzfSsa.jpg",
          age: "ALL",
          likes: 2300,
          dolby: true,
        },
        {
          rank: 2,
          title: "주토피아2",
          rate: 15.2,
          date: "2025.12.24",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/11/27/YiSbqEf6OvFcDoLoQCipDojOHqMCwKG4_420.jpg",
          age: "ALL",
          likes: 1500,
          dolby: false,
        },
        {
          rank: 3,
          title: "만약에 우리",
          rate: 9.0,
          date: "2025.12.29",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/12/04/W6p1b8p719ZRz5LvVdBwWEOJqQZGYIyH_420.jpg",
          age: "12",
          likes: 800,
          dolby: false,
        },
        {
          rank: 4,
          title: "오늘밤, 세계에서...",
          rate: 8.5,
          date: "2025.12.30",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/12/10/KABXf7NuhY8cxBSSjoIYnTFpsBAfErBI_420.jpg",
          age: "12",
          likes: 750,
          dolby: false,
        },
        {
          rank: 5,
          title: "누벨바그",
          rate: 5.2,
          date: "2025.12.31",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/12/23/zJqlVMrN3C4d5PfCwPJGTiX1JLCxf1o4_420.jpg",
          age: "15",
          likes: 420,
          dolby: true,
        },
        {
          rank: 6,
          title: "톰과 제리",
          rate: 4.8,
          date: "2026.01.01",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/11/20/QrLgK75zTzO9bZehTlQLDRViW115sr1i_420.jpg",
          age: "ALL",
          likes: 300,
          dolby: false,
        },
        {
          rank: 7,
          title: "신의 악단",
          rate: 3.5,
          date: "2026.01.05",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/11/25/v344HrDrKIU3iFAbZWMwLssegzKFKdZ7_420.jpg",
          age: "19",
          likes: 120,
          dolby: false,
        },
        {
          rank: 8,
          title: "화양연화",
          rate: 9.8,
          date: "2026.01.10",
          imgUrl:
            "https://img.megabox.co.kr/SharedImg/2025/12/03/xpyJM8dD5sBjVofJ2gqwUh4docg5vbsJ_420.jpg",
          age: "15",
          likes: 990,
          dolby: true,
        },
      ];

      // 현재 표시되고 있는 데이터 상태
      let currentData = [...movieData];

      // 2. 화면 그리기 함수
      function renderMovies(movies) {
        const movieList = document.getElementById("movie-list");
        movieList.innerHTML = "";

        if (movies.length === 0) {
          movieList.innerHTML =
            '<div style="width:100%; text-align:center; padding:50px; font-size:16px;">검색된 영화가 없습니다.</div>';
          document.querySelector(".search-count b").innerText = 0;
          return;
        }

        movies.forEach((movie) => {
          const formattedLikes =
            movie.likes >= 1000
              ? (movie.likes / 1000).toFixed(1) + "k"
              : movie.likes;

          /* [수정됨] 돌비 버튼 생성 로직 제거 */

          const ageImg =
            "https://img.megabox.co.kr/static/pc/images/common/txt/ALL_46x46.png";

          const html = `
            <div class="movie-card">
              <div class="poster-area">
                <span class="rank">${movie.rank}</span>
                <img src="${movie.imgUrl}" alt="${movie.title}">
                <div class="overlay">
                  <div class="explanation">${movie.title}<br>상세정보 확인</div>
                  <div class="Reviews">관람평 <b>${(movie.rate / 1.5).toFixed(
                    1
                  )}</b></div>
                </div>
              </div>
              <div class="info-area">
                <div class="movie-name">
                  <img src="${ageImg}" class="age-icon" alt="${movie.age}"> ${
            movie.title
          }
                </div>
                <div class="movie-rate">예매율 ${movie.rate}% | 개봉일 ${
            movie.date
          }</div>
              </div>
              <div class="btn-group">
                <div class="btn-top">
                  <button type="button" class="btn-common btn-heart" onclick="toggleLike(this)">♡ ${formattedLikes}</button>
                  <button type="button" class="btn-common btn-book" onclick="alert('${
                    movie.title
                  } 예매 페이지로 이동')">예매</button>
                </div>
                </div>
            </div>
          `;
          movieList.innerHTML += html;
        });
        document.querySelector(".search-count b").innerText = movies.length;
      }

      // 3. 탭 클릭 이벤트 (필터링 로직 강화)
      const tabs = document.querySelectorAll(".movie-tab li");
      tabs.forEach((tab) => {
        tab.addEventListener("click", function () {
          tabs.forEach((t) => t.classList.remove("active"));
          this.classList.add("active");

          const tabName = this.innerText;
          let filteredData = [...movieData];

          if (tabName === "MEGA ONLY") {
            filteredData = filteredData.filter((m) => m.dolby === true);
          } else if (tabName === "상영예정작") {
            // 날짜 기준 정렬 (최신순)
            filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
          } else if (tabName === "박스오피스") {
            // 랭킹순 정렬
            filteredData.sort((a, b) => a.rank - b.rank);
          }

          currentData = filteredData; // 현재 데이터 갱신
          renderMovies(filteredData);
        });
      });

      // 4. 검색 기능 (엔터키 지원 추가)
      const searchInput = document.getElementById("movie-searchbar");

      function filterMovies() {
        const keyword = searchInput.value.toLowerCase();
        const searchResult = movieData.filter((movie) =>
          movie.title.toLowerCase().includes(keyword)
        );
        currentData = searchResult;
        renderMovies(searchResult);
      }

      searchInput.addEventListener("keyup", function (e) {
        if (e.key === "Enter") {
          filterMovies();
        } else {
          // 실시간 검색
          filterMovies();
        }
      });

      // 5. 좋아요 토글
      function toggleLike(btn) {
        let text = btn.innerText;
        if (text.includes("♡")) {
          btn.innerText = text.replace("♡", "♥");
          btn.style.color = "#503396";
          btn.style.borderColor = "#503396";
        } else {
          btn.innerText = text.replace("♥", "♡");
          btn.style.color = "#444";
          btn.style.borderColor = "#ebebeb";
        }
      }

      // 6. [추가] '개봉작만' 토글 버튼 기능
      const toggleBtn = document.getElementById("toggle-release");
      let isReleaseOnly = true; // 기본 ON 상태라고 가정

      toggleBtn.addEventListener("click", function () {
        isReleaseOnly = !isReleaseOnly;

        if (isReleaseOnly) {
          this.classList.remove("off"); // ON 스타일 (CSS filter 제거)
          // 전체 다시 보여주기 (혹은 로직에 맞게 필터링)
          renderMovies(currentData);
        } else {
          this.classList.add("off"); // OFF 스타일 (흑백 처리)
          // 예시: 랜덤하게 절반만 보여주거나 특정 로직 적용
          // 여기서는 시각적 효과만 적용하고 데이터는 유지합니다.
          renderMovies(currentData);
        }
      });

      // 7. [추가] 더보기 버튼 기능
      // 영화 리스트가 적으므로, 기존 리스트를 복제해서 추가하는 방식으로 구현
      function loadMore() {
        const currentCount = document.querySelectorAll(".movie-card").length;
        if (currentCount >= 20) {
          alert("더 이상 불러올 영화가 없습니다.");
          return;
        }

        // 로딩 시늉을 내기 위해 데이터 복제
        const moreData = [...currentData].slice(0, 4); // 4개씩 추가

        // renderMovies를 쓰면 초기화되므로 append 방식 사용
        const movieList = document.getElementById("movie-list");

        moreData.forEach((movie) => {
          // 렌더링 로직 중복 방지를 위해 간단히 처리 (실무에선 별도 함수 분리 권장)
          const formattedLikes =
            movie.likes >= 1000
              ? (movie.likes / 1000).toFixed(1) + "k"
              : movie.likes;

          /* [수정됨] 돌비 버튼 로직 제거 */

          const html = `
                <div class="movie-card">
                  <div class="poster-area">
                    <span class="rank">${movie.rank}</span>
                    <img src="${movie.imgUrl}" alt="${movie.title}">
                    <div class="overlay">
                      <div class="explanation">${
                        movie.title
                      }<br>상세정보 확인</div>
                      <div class="Reviews">관람평 <b>${(
                        movie.rate / 1.5
                      ).toFixed(1)}</b></div>
                    </div>
                  </div>
                  <div class="info-area">
                    <div class="movie-name">
                      <img src="https://img.megabox.co.kr/static/pc/images/common/txt/ALL_46x46.png" class="age-icon"> ${
                        movie.title
                      }
                    </div>
                    <div class="movie-rate">예매율 ${movie.rate}% | 개봉일 ${
            movie.date
          }</div>
                  </div>
                  <div class="btn-group">
                    <div class="btn-top">
                      <button type="button" class="btn-common btn-heart" onclick="toggleLike(this)">♡ ${formattedLikes}</button>
                      <button type="button" class="btn-common btn-book" onclick="alert('예매 페이지로 이동')">예매</button>
                    </div>
                    </div>
                </div>
              `;
          movieList.insertAdjacentHTML("beforeend", html);
        });

        // 카운트 업데이트
        const newTotal = document.querySelectorAll(".movie-card").length;
        document.querySelector(".search-count b").innerText = newTotal;
      }

      // 8. 초기 실행
      document.addEventListener("DOMContentLoaded", () => {
        renderMovies(movieData);
      });
    </script>
  </body>
</html>
